<div>
    <div fxLayout="column" style="width: 99%;">
        <form [formGroup]="outputReport">
            <div fxLayout="column" style="width:100%;">
                <div fxLayout="row" style="width: 50%;padding: 1%;" fxLayoutAlign="space-around start" fxFlex="95">

                    <mat-form-field appearance="fill" fxFlex="35">
                        <mat-label>Month and Year</mat-label>
                        <input matInput [matDatepicker]="dp" [formControl]="date">
                        <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                        <mat-datepicker #dp startView="year" (yearSelected)="chosenYearHandler($event)"
                            (monthSelected)="chosenMonthHandler($event, dp)" panelClass="example-month-picker">
                        </mat-datepicker>
                    </mat-form-field>
                    <!-- 
                    <mat-form-field appearance="fill" fxFlex="35">
                        <mat-label>Choose the Date</mat-label>
                        <input matInput [matDatepicker]="picker" formControlName="date" placeholder="Shift Date">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field> -->

                    <!-- <mat-form-field class="form-field" fxFlex="1" class="invisible">
                        <mat-label>State </mat-label>
                        <mat-select formControlName="stateid">
                            <mat-option *ngFor="let m of State;let i=index" [value]="m[1]">
                                {{m[2]}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field> -->

                    <button [disabled]="outputReport.invalid" mat-raised-button color="primary" fxFlex="20"
                        (click)="getSearchData()">
                        Submit
                    </button>
                    <!-- <div *ngIf="!gotData" fxLayoutAlign="center center" style="width: 100%; height:100%; ">
                        <mat-spinner d iameter="30"></mat-spinner>
                    </div> -->

                </div>

            </div>
        </form>
        <!-- <pre>
            {{filtersForm.value|json}}
        </pre> -->
    </div>
</div>
<!-- <div *ngIf="OutputData?.length == 0" style="color: red;text-align: center;">
    <mat-label>No Records Found</mat-label>
</div> -->
<div fxLayout="column" style="width: 99%;" fxLayoutAlign="center">
    <mat-tab-group class="gb" (selectedTabChange)="waterfallMonthTimelineTabClick($event.tab.textLabel)"
        mat-align-tabs="center">
        <mat-tab label="Combined">
            <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap
                fxLayoutAlign="space-around center" fxFlex="90">
                <div id="highchartcontainer-waterfall-linewise-combined"
                    style="height:400px; padding-top:1px;background: url('/../../../assets/images/chartLoader.gif')  no-repeat center ;background-size: 70px 70px;"
                    fxFlex="100">
                </div>
            </div>
        </mat-tab>

        <mat-tab [label]="line" *ngFor="let line of lines">
            <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap
                fxLayoutAlign="space-around center" fxFlex="90">
                <div [id]="'highchartcontainer-waterfall-' + line" style="height:400px; padding-top:1px;" fxFlex="100">
                </div>
            </div>

        </mat-tab>|

    </mat-tab-group>


    <mat-tab-group mat-align-tabs="center" class="gb" (selectedTabChange)="lineWiseKpiTabClick($event.tab.textLabel)">
        <mat-tab label="Lines-combined">
            <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap
                fxLayoutAlign="space-around center" fxFlex="99">

                <div id="highchartcontainer-control-linecombined"
                    style="height:400px; padding-top:1px;background: url('/../../../assets/images/chartLoader.gif')  no-repeat center ;background-size: 70px 70px;"
                    fxFlex="100">
                </div>
            </div>
        </mat-tab>


        <mat-tab [label]="line" *ngFor="let line of lines">
            <mat-form-field appearance="fill" class="filterdropdown">
                <mat-select [(ngModel)]="selected" (selectionChange)="getFilterValue($event.value,line)" id="select1">
                    <mat-option *ngFor="let filter of filters" [value]="filter.value">
                        {{filter.viewValue}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap
                fxLayoutAlign="space-around center" fxFlex="100">

                <div [id]="'highchartcontainer-control-'+line" style="height:400px; padding-top:1px;" fxFlex="100">
                </div>
            </div>

        </mat-tab>

    </mat-tab-group>


    <mat-tab-group mat-align-tabs="center" class="gb"
        (selectedTabChange)="lineWiseSpeedIdleTabClick($event.tab.textLabel)">
        <mat-tab label="Lines-combined">
            <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap
                fxLayoutAlign="space-around center" fxFlex="99">

                <div id="highchartcontainer-control-speedloss-linecombined"
                    style="height:400px; padding-top:1px;background: url('/../../../assets/images/chartLoader.gif')  no-repeat center ;background-size: 70px 70px;"
                    fxFlex="100">
                </div>
            </div>
        </mat-tab>
        <mat-tab [label]="line" *ngFor="let line of lines">

            <mat-form-field appearance="fill" class="filterdropdown">
                <mat-select [(ngModel)]="selected2" (selectionChange)="getFilterSpeedIdleValue($event.value,line)"
                    id="select">
                    <mat-option *ngFor="let filter of filters" [value]="filter.value">
                        {{filter.viewValue}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap
                fxLayoutAlign="space-around center" fxFlex="100">

                <div [id]="'highchartcontainer-control-speedidle-'+line" style="height:400px; padding-top:1px;"
                    fxFlex="100">
                </div>
            </div>

        </mat-tab>

    </mat-tab-group>

    <mat-tab-group backgroundColor="" mat-align-tabs="center" label="Event History" class="gb"
        (selectedTabChange)="eventHistoryTabClick($event.tab.textLabel)">
        <mat-tab label="Combined">

            <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap
                fxLayoutAlign="space-around center" fxFlex="99">

                <div id="highchartcontainer-lines-combined-eventhistory"
                    style="height:400px; padding-top:1px;background: url('/../../../assets/images/chartLoader.gif')  no-repeat center ;background-size: 70px 70px;"
                    fxFlex="50">
                </div>

                <div id="highChartContainer-Combined-EventHistory-Pie"
                    style="height:400px; padding-top:1px;background: url('/../../../assets/images/chartLoader.gif')  no-repeat center ;background-size: 70px 70px;"
                    fxFlex="50">
                </div>
            </div>
        </mat-tab>
        <mat-tab [label]="line" *ngFor="let line of lines">
            <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap
                fxLayoutAlign="space-around center" fxFlex="99">

                <div [id]="'highchartcontainer-eventhistory-'+line" style="height:400px; padding-top:1px;" fxFlex="100">
                </div>
            </div>
        </mat-tab>
    </mat-tab-group>
</div>
<div fxLayout="column" style="width: 99%;" fxLayoutAlign="center">
    <div>
        <button mat-raised-button color="primary" (click)="Export_Excel()">Export to Excel</button>&nbsp;
        <button mat-raised-button color="primary" (click)="Export_PDF()">Export to PDF</button>
    </div>

    <div *ngIf="OutputData?.length > 0" fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap
        fxLayoutGap="0.1%" fxLayoutAlign="space-around center" fxFlex="100">
        <wbr-pivot #pivot1 [toolbar]="true" [width]="'100%'" [height]="700" fxFlex="99"
            (beforetoolbarcreated)="customizeToolbar($event)" (reportcomplete)="onReportComplete()">
        </wbr-pivot>
        <!-- <fm-pivot #pivot1 [toolbar]="true" [width]="'100%'" [height]="700" fxFlex="99"
            (beforetoolbarcreated)="customizeToolbar($event)" (reportcomplete)="onReportComplete()"
            [licenseKey]="licenseKey">
        </fm-pivot> -->
    </div>

    <!-- <pre>{{lines|json}}</pre> -->
</div>