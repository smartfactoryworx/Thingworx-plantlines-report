
<div>
    <div fxLayout="column" style="width: 100%;">
        <form [formGroup]="faultReport">
            <div fxLayout="column" style="width:100%;">
                <div fxLayout="row" style="width: 50%;padding: 1%;" fxLayoutAlign="space-around start" fxFlex="95">

                    <mat-form-field appearance="fill" fxFlex="35">
                        <mat-label>Month and Year</mat-label>
                        <input matInput [matDatepicker]="dp" [formControl]="date">
                        <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                        <mat-datepicker #dp startView="year" (yearSelected)="chosenYearHandler($event)"
                            (monthSelected)="chosenMonthHandler($event, dp)" panelClass="example-month-picker">
                        </mat-datepicker>
                    </mat-form-field>

                    <!-- <mat-form-field class="form-field" fxFlex="1" class="invisible">
                        <mat-label>State </mat-label>
                        <mat-select formControlName="stateid">
                            <mat-option *ngFor="let m of State;let i=index" [value]="m[1]">
                                {{m[2]}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field> -->


                    <button [disabled]="faultReport.invalid" mat-raised-button color="primary" fxFlex="20"
                        (click)="SearchStateData()">
                        Submit
                    </button>
                    <div *ngIf="!gotData" fxLayoutAlign="center center" style="width: 100%; height:100%; ">
                        <mat-spinner diameter="30"></mat-spinner>
                    </div>

                </div>

            </div>
        </form>
        <!-- <pre>
            {{filtersForm.value|json}}
        </pre> -->
    </div>
</div>
<div>
    <button mat-raised-button color="primary" (click)="Export_Excel()" >Export to Excel</button>&nbsp;
    <button mat-raised-button color="primary" (click)="Export_PDF()">Export to PDF</button>
<!-- <button (click)="Export_PDF()" class="btn">Export to PDF</button> -->
</div>
<!-- <button (click)="expandAll()">
    Expand
</button>  -->
<div fxLayout="column" style="width: 100%;" fxLayoutAlign="center">
    <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="0.1%"
        fxLayoutAlign="space-around center" fxFlex="99">
        <wbr-pivot #pivot2 [toolbar]="true" [report]="pivotReport"   fxFlex="99"
            (beforetoolbarcreated)="customizeToolbar($event)" 
            (reportcomplete)="onReportComplete()">
        </wbr-pivot>
    </div>

    <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap fxLayoutAlign="space-around center"
        fxFlex="99">
        <div id="GBarchart1" style="height:400px; padding-top:1px;" fxFlex="80">
        </div>
    </div>
    <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap fxLayoutAlign="space-around center"
        fxFlex="99">
        <div id="GBarchart2" style="height:600px; padding-top:1px;" fxFlex="99"></div>
    </div>


</div>


<router-outlet></router-outlet>