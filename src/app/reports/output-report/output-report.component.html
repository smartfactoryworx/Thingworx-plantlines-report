<div>
    <div fxLayout="column" style="width: 99%;">
        <form [formGroup]="outputReport">
            <div fxLayout="column" style="width:100%;">
                <div fxLayout="row" style="width: 50%;padding: 1%;" fxLayoutAlign="space-around start" fxFlex="95">

                    <mat-form-field appearance="fill" fxFlex="35" style="margin-right: 5%;">
                        <mat-label>Month and Year</mat-label>
                        <input matInput [matDatepicker]="dp" [formControl]="date">
                        <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                        <mat-datepicker #dp startView="year" (yearSelected)="chosenYearHandler($event)"
                            (monthSelected)="chosenMonthHandler($event, dp)" panelClass="example-month-picker">
                        </mat-datepicker>
                    </mat-form-field>

                    <mat-form-field appearance="fill" fxFlex="35" style="margin-right: 5%;">
                        <mat-select formControlName="line_id">
                            <mat-option *ngFor="let line of LinesData" [value]="line.lineid">
                                {{line.linename}}({{line.plantname}}/{{line.locationname}})
                            </mat-option>
                        </mat-select>
                    </mat-form-field>

                    <button [disabled]="outputReport.invalid" mat-raised-button color="primary" fxFlex="15"
                        (click)="getSearchData('')" style="margin-right: 5%;">
                        Submit
                    </button>
                    <!-- <div *ngIf="!gotData" fxLayoutAlign="center center" style="width: 100%; height:100%; ">
                        <mat-spinner diameter="30"></mat-spinner>
                    </div> -->
                    <mat-label style="color: red;">{{errormsg}} </mat-label>
                    <!-- <button mat-raised-button class="btn" color="warn" fxFlex="20" (click)="exportHTMLtoPDF()"> Export Chart To PDF </button> -->
                </div>

            </div>
        </form>
        <!-- <pre>
            {{LinesData|json}}
        </pre> -->
    </div>
</div>

<div fxLayout="column" style="width: 99%;" fxLayoutAlign="center" id="element-to-print">

    <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap fxLayoutAlign="space-around center"
        fxFlex="90">
        <div id="higchartcontainer-waterfall"
            style="height:400px; padding-top:1px;background: url('/../../../assets/images/chartLoader.gif')  no-repeat center ;background-size: 70px 70px;"
            fxFlex="100">
        </div>
    </div>
    <div class="html2pdf__page-break"></div>

    <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap fxLayoutAlign="space-around center"
        fxFlex="100">
        <mat-form-field appearance="fill" id="filterdropdown">
            <mat-select [(ngModel)]="selected" (selectionChange)="getFilterValue($event.value)" id="select1">
                <mat-option *ngFor="let filter of filters" [value]="filter.value">
                    {{filter.viewValue}}
                </mat-option>
            </mat-select>
        </mat-form-field>
        <div [id]="'highchartcontainer-control'"
            style="height:400px; padding-top:1px;background: url('/../../../assets/images/chartLoader.gif')  no-repeat center ;background-size: 70px 70px;"
            fxFlex="100">
        </div>
    </div>

    <div class="html2pdf__page-break"></div>
    <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap fxLayoutAlign="space-around center"
        fxFlex="100">
        <mat-form-field appearance="fill" id="filterdropdown1">
            <mat-select [(ngModel)]="selected2" (selectionChange)="getFilterIdleValue($event.value)" id="select">
                <mat-option *ngFor="let filter of filters" [value]="filter.value">
                    {{filter.viewValue}}
                </mat-option>
            </mat-select>
        </mat-form-field>
        <div [id]="'highchartcontainer-control-idle'"
            style="height:400px; padding-top:1px;background: url('/../../../assets/images/chartLoader.gif')  no-repeat center ;background-size: 70px 70px;"
            fxFlex="100">
        </div>
    </div>

    <div class="html2pdf__page-break"></div>

    <mat-tab-group backgroundColor="" mat-align-tabs="center" label="Event History" class="gb"
        (selectedTabChange)="eventHistoryTabClick($event.tab.textLabel)">
        <mat-tab label="Combined">
            <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap
                fxLayoutAlign="space-around center" fxFlex="99">
                <div id="higchartcontainer-lines-combined-eventhistory"
                    style="height:400px; padding-top:1px;background: url('/../../../assets/images/chartLoader.gif')  no-repeat center ;background-size: 70px 70px;"
                    fxFlex="50">
                </div>
                <div id="highChartContainer-Combined-EventHistory-Pie"
                    style="height:400px; padding-top:1px;background: url('/../../../assets/images/chartLoader.gif')  no-repeat center ;background-size: 70px 70px;"
                    fxFlex="50">
                </div>
            </div>
        </mat-tab>
        <mat-tab [label]="lineId">
            <div fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap
                fxLayoutAlign="space-around center" fxFlex="99">

                <div [id]="'higchartcontainer-eventhistory'" style="height:400px; padding-top:1px;" fxFlex="100">
                </div>
            </div>
        </mat-tab>
    </mat-tab-group>

</div>


<div fxLayout="column" style="width: 99%;" fxLayoutAlign="center">

    <div>
        <button mat-raised-button class="btn" color="primary" (click)="Export_Excel()" class="btn">Export Table to
            Excel</button>&nbsp;
        <button mat-raised-button class="btn" color="primary" (click)="Export_PDF()" class="btn">Export Table to
            PDF</button>

    </div>
    <div *ngIf="OutputData?.length > 0" fxLayout="row" style="width: 100%;" fxLayout.xs="column" fxLayoutWrap
        fxLayoutGap="0.1%" fxLayoutAlign="space-around center" fxFlex="100">
        <wbr-pivot #pivot1 [toolbar]="true" [width]="'100%'" [height]="700" fxFlex="99"
            (beforetoolbarcreated)="customizeToolbar($event)" (reportcomplete)="onReportComplete()">
        </wbr-pivot>
        <!-- <fm-pivot #pivot1 [toolbar]="true" [width]="'100%'" [height]="700" fxFlex="99"
            (beforetoolbarcreated)="customizeToolbar($event)" (reportcomplete)="onReportComplete()"
            [licenseKey]="licenseKey">
        </fm-pivot> -->
    </div>

</div>